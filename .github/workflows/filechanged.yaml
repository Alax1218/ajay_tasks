name: Find File Changes

on:
  push:

jobs:
  check-changes:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          fetch-depth: 2 # Fetch both commits

      - name: Set commit SHAs
        run: |
          export PREV_SHA=$(git rev-parse HEAD~)
          export CURR_SHA=$(git rev-parse HEAD)
          echo "Previous commit SHA: $PREV_SHA"
          echo "Current commit SHA: $CURR_SHA"

      - name: Get file changes
        run: |
          git diff --name-only $PREV_SHA $CURR_SHA -- "./file1"
          # Replace "$FILE" with the actual file path

      - name: Output changed files
        id: get_file_changes
        run: echo "file-changed=1" >> $GITHUB_ENV

      - name: Display changes
        if: steps.get_file_changes.outputs['file-changed'] == '1'
        run: |
          echo "File changed: ${{ steps.get_file_changes.outputs.file-changed }}"
