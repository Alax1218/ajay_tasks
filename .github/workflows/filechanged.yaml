name: Find Changed Files

on:
  push:

jobs:
  check-changes:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

        with:
          fetch-depth: 2 # Fetch both commits

      - name: Get commit SHAs
        run: |
          PREV_SHA=$(git rev-parse HEAD~)
          CURR_SHA=$(git rev-parse HEAD)
          echo "Previous commit SHA: ${{ PREV_SHA }}"
          echo "Current commit SHA: ${{ CURR_SHA }}"
      - name: Get changed files
        run: |
          git diff --name-only ${{ PREV_SHA }} ${{ CURR_SHA }}
      - name: Output changed files
        run: |
          for file in ${{ steps.get_changed_files.outputs.files }}; do echo "$file"; done
