name: Find Changed Files

on:
  push:
    branches:
      - main

jobs:
  find-changes:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Set commit SHAs
        run: |
          PREV_SHA=$(git log -n 1 --skip 1 --pretty=format:"%H")
          CURR_SHA=$(git rev-parse HEAD)
          echo "Previous commit SHA: $PREV_SHA"
          echo "Current commit SHA: $CURR_SHA"

      - name: Get changed files
        run: |
          CHANGED_FILES=$(git diff --name-only $PREV_SHA $CURR_SHA)
          echo "Changed files:"
          echo "$CHANGED_FILES" | while IFS= read -r line; do echo "   $line"; done
